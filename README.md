# Tauri App Update

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Tauri 2.0å’ŒVue 3æ„å»ºçš„æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œé›†æˆäº†åº”ç”¨å†…æ›´æ–°åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ åŸºäºTauri 2.0çš„è·¨å¹³å°æ¡Œé¢åº”ç”¨
- ğŸ¨ ç°ä»£åŒ–çš„Vue 3ç”¨æˆ·ç•Œé¢
- ğŸ”„ å†…ç½®åº”ç”¨å†…æ›´æ–°åŠŸèƒ½
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šç§å±å¹•å°ºå¯¸

## åº”ç”¨å†…æ›´æ–°åŠŸèƒ½

### é…ç½®è¯´æ˜

åº”ç”¨å†…æ›´æ–°åŠŸèƒ½å·²ç»é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œä½†éœ€è¦æ‚¨è¿›è¡Œä¸€äº›é…ç½®ï¼š

1. **æ›´æ–°ç«¯ç‚¹é…ç½®**
   åœ¨ `src-tauri/tauri.conf.json` ä¸­ï¼Œæ‚¨éœ€è¦é…ç½®æ›´æ–°æœåŠ¡å™¨ç«¯ç‚¹ï¼š
   ```json
   "updater": {
     "active": true,
     "endpoints": [
       "https://your-update-server.com/{{target}}/{{current_version}}"
     ],
     "dialog": true,
     "pubkey": "YOUR_PUBLIC_KEY_HERE"
   }
   ```

2. **å…¬é’¥é…ç½®**
   æ‚¨éœ€è¦ç”Ÿæˆä¸€ä¸ªå…¬é’¥/ç§é’¥å¯¹ï¼Œå¹¶å°†å…¬é’¥æ”¾åœ¨é…ç½®ä¸­ã€‚ç§é’¥ç”¨äºç­¾åæ›´æ–°åŒ…ã€‚

### æ›´æ–°æœåŠ¡å™¨è¦æ±‚

æ‚¨çš„æ›´æ–°æœåŠ¡å™¨éœ€è¦è¿”å›ç¬¦åˆTauriæ›´æ–°æ ¼å¼çš„JSONå“åº”ï¼š

```json
{
  "version": "0.2.0",
  "notes": "æ–°ç‰ˆæœ¬æ›´æ–°è¯´æ˜",
  "pub_date": "2024-01-01T00:00:00Z",
  "platforms": {
    "darwin-x86_64": {
      "signature": "ç­¾å",
      "url": "https://example.com/app-v0.2.0.dmg"
    },
    "linux-x86_64": {
      "signature": "ç­¾å",
      "url": "https://example.com/app-v0.2.0.AppImage"
    },
    "windows-x86_64": {
      "signature": "ç­¾å",
      "url": "https://example.com/app-v0.2.0.msi"
    }
  }
}
```

### ç”Ÿæˆå¯†é’¥å¯¹

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆå¯†é’¥å¯¹ï¼š

```bash
# ç”Ÿæˆç§é’¥
openssl genpkey -algorithm RSA -out private.pem -pkeyopt rsa_keygen_bits:2048

# ç”Ÿæˆå…¬é’¥
openssl rsa -pubout -in private.pem -out public.pem

# æŸ¥çœ‹å…¬é’¥å†…å®¹ï¼ˆå¤åˆ¶åˆ°tauri.conf.jsonä¸­ï¼‰
cat public.pem
```

## å¼€å‘

### å‰ç½®è¦æ±‚

- Node.js 18+
- pnpm
- Rust 1.70+

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### å¼€å‘æ¨¡å¼

```bash
pnpm tauri dev
```

### æ„å»º

```bash
pnpm tauri build
```

## é¡¹ç›®ç»“æ„

```
tauri-app-update/
â”œâ”€â”€ src/                 # Vueå‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ App.vue         # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ main.ts         # åº”ç”¨å…¥å£
â”œâ”€â”€ src-tauri/          # Tauriåç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib.rs      # ä¸»è¦é€»è¾‘
â”‚   â”‚   â””â”€â”€ main.rs     # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ Cargo.toml      # Rustä¾èµ–é…ç½®
â”‚   â””â”€â”€ tauri.conf.json # Taurié…ç½®
â””â”€â”€ package.json        # å‰ç«¯ä¾èµ–é…ç½®
```

## æ›´æ–°æµç¨‹

1. ç”¨æˆ·ç‚¹å‡»"æ£€æŸ¥æ›´æ–°"æŒ‰é’®
2. åº”ç”¨å‘é…ç½®çš„æ›´æ–°ç«¯ç‚¹å‘é€è¯·æ±‚
3. å¦‚æœæœ‰æ–°ç‰ˆæœ¬ï¼Œè‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…
4. å®‰è£…å®Œæˆååº”ç”¨è‡ªåŠ¨é‡å¯

## æ³¨æ„äº‹é¡¹

- ç¡®ä¿æ›´æ–°æœåŠ¡å™¨æ”¯æŒHTTPS
- æ­£ç¡®é…ç½®å…¬é’¥ä»¥éªŒè¯æ›´æ–°åŒ…
- æµ‹è¯•æ›´æ–°æµç¨‹åœ¨ç›®æ ‡å¹³å°ä¸Šçš„å…¼å®¹æ€§
- å»ºè®®åœ¨å‘å¸ƒå‰å……åˆ†æµ‹è¯•æ›´æ–°åŠŸèƒ½

## è®¸å¯è¯

MIT
